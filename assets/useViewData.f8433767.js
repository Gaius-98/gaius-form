import{b8 as S,b9 as f,r as j,dO as l,aG as _,dN as k,__tla as I}from"./index.be4b2090.js";let C,v,F=Promise.all([(()=>{try{return I}catch{}})()]).then(async()=>{let w;v=S("viewStore",()=>{const t=f({componentData:[],name:"",id:"",img:"",height:1080,width:1920}),c=f({name:"",label:"",props:{},id:"",type:"",dataSetting:{type:"static",data:"",handleFunc:"",params:{}},positionSize:{top:0,left:0,width:100,height:100}}),g=e=>{const{id:i}=e;let n=t.componentData.find(u=>u.id==i);n&&Object.assign(n,{...n,...e})},s=f([]),a=j(0),d=()=>{s[a.value++]=l.exports.cloneDeep(t.componentData)},r=()=>{a.value>0&&(a.value--,t.componentData=l.exports.cloneDeep(s[a.value]))},m=()=>{a.value<s.length-1&&(a.value++,t.componentData=l.exports.cloneDeep(s[a.value]))},o=e=>{let i=t.componentData.findIndex(n=>n.id===e.id);i!=-1&&Object.assign(c,l.exports.cloneDeep(t.componentData[i]))},p=()=>{let e=t.componentData.findIndex(i=>i.id===c.id);e!=-1&&Object.assign(t.componentData[e],l.exports.cloneDeep(c))},y=e=>{t.componentData.push(e),d()},h=(e,i)=>{let n=t.componentData.findIndex(O=>O.id===i),u=t.componentData[n];switch(e){case"delete":t.componentData.splice(n,1);break;case"placeTop":t.componentData.splice(n,1),t.componentData.push(u);break;case"placeBottom":t.componentData.splice(n,1),t.componentData.unshift(u);break}d()},D=()=>{Object.assign(t,{componentData:[],name:"",id:"",img:"",height:1080,width:1920}),x()},b=e=>{Object.assign(t,e)},x=()=>{Object.assign(c,{name:"",label:"",props:{},id:"",type:"",dataSetting:{type:"static",data:"",handleFunc:"",params:{}},positionSize:{top:0,left:0,width:100,height:100}})};return{viewData:t,curCompData:c,snapshotData:s,curSnapshotIdx:a,setSnapshot:d,undo:r,redo:m,onClickComp:o,setComp:g,addComp:y,changeCompByCommand:h,init:D,setViewData:b,initCurComp:x,syncCfg:p}}),w=async t=>{const{dataSetting:{type:c,data:g,params:s,handleFunc:a,interfaceUrl:d},id:r}=t,{pool:m}=k();console.log(m,"---new-*--");let o={};return s&&(o=l.exports.cloneDeep(s),Object.keys(o).forEach(p=>{m[o[p]]&&(o[p]=m[o[p]])})),console.log(o),new Promise((p,y)=>{c=="static"?p({id:r,data:g}):_({url:d,method:"post",data:o}).then(h=>{let D=h;if(a)try{D=new Function("resData",a)(h)}catch(b){console.warn("\u5904\u7406\u51FD\u6570\u6267\u884C\u5931\u8D25",b)}p({id:r,data:D})})})},C=w});export{F as __tla,C as a,v as u};
