import{u as w,a as b,__tla as x}from"./useViewData.af033cd7.js";import{d as y,aM as k,bd as g,r as v,ca as $,U as P,o as r,c as l,a3 as q,aT as I,A as z,K as B,w as E,h as M,N as S,O as T,M as V,_ as A,__tla as C}from"./index.c4f7cc90.js";import{a as F,__tla as K}from"./api.d31e9b81.js";import{__tla as L}from"./request.8df36517.js";let d,N=Promise.all([(()=>{try{return x}catch{}})(),(()=>{try{return C}catch{}})(),(()=>{try{return K}catch{}})(),(()=>{try{return L}catch{}})()]).then(async()=>{const m=y({__name:"ViewPreview",setup(O){const _=w(),{viewData:p}=k(_),c=g(),t=v(p.value),i=v(!0),u=()=>{let o=t.value.componentData.map(e=>b(e));Promise.all(o).then(e=>{e.forEach(({id:a,data:s})=>{h(a,s)})})},h=(o,e)=>{let a=t.value.componentData.findIndex(s=>s.id==o);if(a!=-1){let s=t.value.componentData[a];const{type:n}=s;switch(n){case"text":t.value.componentData[a].props.value=e;break;case"img":t.value.componentData[a].props.src=e;break;case"iframe":t.value.componentData[a].props.url=e;break;case"chartPie":t.value.componentData[a].props.option.dataset.source=e;break;case"chartBar":t.value.componentData[a].props.option.dataset.source=e;break;case"chartLine":t.value.componentData[a].props.option.dataset.source=e;break;case"icon":t.value.componentData[a].props.icon=e;break;default:t.value.componentData[a].props.value=e;break}}};c.query.id?F.getDetail({id:c.query.id}).then(o=>{const{code:e,data:a,msg:s}=o;i.value=!1,e==0&&(t.value=a,u())}):(t.value=p.value,u());const f=o=>{const{positionSize:{left:e,top:a,width:s,height:n}}=o;return{position:"absolute",left:`${e}px`,top:`${a}px`,width:`${s}px`,height:`${n}px`}},D=()=>({width:`${t.value.width}px`,height:`${t.value.height}px`});return(o,e)=>{const a=$("loading");return P((r(),l("div",{class:"view-preview",style:D},[(r(!0),l(q,null,I(t.value.componentData,s=>(r(),l("div",{key:s.id,style:z(f(s)),class:"box"},[(r(),B(V(s.name),T(s.props,{preview:!0}),{default:E(()=>[M(S(s.name=="el-text"?s.props.value:""),1)]),_:2},1040))],4))),128))])),[[a,i.value]])}}});d=A(m,[["__scopeId","data-v-a5e3ad5f"]])});export{N as __tla,d as default};
