import{bo as S,bp as f,r as j,dO as l,b1 as _,dN as k,__tla as I}from"./index.1ab9adf3.js";let v,C,F=Promise.all([(()=>{try{return I}catch{}})()]).then(async()=>{let w;C=S("viewStore",()=>{const t=f({componentData:[],name:"",id:"",img:"",height:1080,width:1920}),c=f({name:"",label:"",props:{},id:"",type:"",dataSetting:{type:"static",data:"",handleFunc:"",params:{}},positionSize:{top:0,left:0,width:100,height:100}}),g=e=>{const{id:i}=e;let n=t.componentData.find(u=>u.id==i);n&&Object.assign(n,{...n,...e})},p=f([]),a=j(0),d=()=>{p[a.value++]=l.exports.cloneDeep(t.componentData)},r=()=>{a.value>0&&(a.value--,t.componentData=l.exports.cloneDeep(p[a.value]))},m=()=>{a.value<p.length-1&&(a.value++,t.componentData=l.exports.cloneDeep(p[a.value]))},o=e=>{let i=t.componentData.findIndex(n=>n.id===e.id);i!=-1&&Object.assign(c,l.exports.cloneDeep(t.componentData[i]))},s=()=>{let e=t.componentData.findIndex(i=>i.id===c.id);e!=-1&&Object.assign(t.componentData[e],l.exports.cloneDeep(c))},x=e=>{t.componentData.push(e),d()},h=(e,i)=>{let n=t.componentData.findIndex(O=>O.id===i),u=t.componentData[n];switch(e){case"delete":t.componentData.splice(n,1);break;case"placeTop":t.componentData.splice(n,1),t.componentData.push(u);break;case"placeBottom":t.componentData.splice(n,1),t.componentData.unshift(u);break}d()},D=()=>{Object.assign(t,{componentData:[],name:"",id:"",img:"",height:1080,width:1920}),y()},b=e=>{Object.assign(t,e)},y=()=>{Object.assign(c,{name:"",label:"",props:{},id:"",type:"",dataSetting:{type:"static",data:"",handleFunc:"",params:{}},positionSize:{top:0,left:0,width:100,height:100}})};return{viewData:t,curCompData:c,snapshotData:p,curSnapshotIdx:a,setSnapshot:d,undo:r,redo:m,onClickComp:o,setComp:g,addComp:x,changeCompByCommand:h,init:D,setViewData:b,initCurComp:y,syncCfg:s}}),w=async t=>{const{dataSetting:{type:c,data:g,params:p,handleFunc:a,interfaceUrl:d},id:r}=t,{pool:m}=k();console.log(m,"---new-*--");let o={};return p&&(o=l.exports.cloneDeep(p),Object.keys(o).forEach(s=>{m[o[s]]&&(o[s]=m[o[s]])})),console.log(o),new Promise((s,x)=>{c=="static"?s({id:r,data:g}):_({url:d,method:"post",data:o}).then(h=>{let D=h;if(a)try{D=new Function("resData",a)(h)}catch(b){console.warn("\u5904\u7406\u51FD\u6570\u6267\u884C\u5931\u8D25",b)}s({id:r,data:D})})})},v=w});export{F as __tla,v as a,C as u};
