import{u as P,__tla as S}from"./viewDesign.f522ccd1.js";import{d as E,bi as O,bF as j,g as h,w as q,aB as z,am as B,o as l,c,a0 as I,al as V,a3 as F,y as L,z as N,aD as Z,au as C,V as H,Z as K,dN as _,dO as M,_ as R,__tla as T}from"./index.946501c7.js";import{a as A,__tla as G}from"./api.fd87f510.js";let D,J=Promise.all([(()=>{try{return S}catch{}})(),(()=>{try{return T}catch{}})(),(()=>{try{return G}catch{}})()]).then(async()=>{const b=E({__name:"ViewPreview",setup(Q){const f=P(),{viewData:i}=O(f),u=j(),o=h(i.value),r=h(!0),d=()=>{let t=o.value.componentData.map(a=>_(a));Promise.all(t).then(a=>{a.forEach(({id:e,data:s})=>{v(e,s)})})},y=t=>{t&&_(t).then(({id:a,data:e})=>{v(a,e)})},v=(t,a)=>{let e=o.value.componentData.findIndex(s=>s.id==t);if(e!=-1){let s=o.value.componentData[e];const{type:n}=s;switch(n){case"text":o.value.componentData[e].props.value=a;break;case"img":o.value.componentData[e].props.src=a;break;case"iframe":o.value.componentData[e].props.url=a;break;case"chartPie":o.value.componentData[e].props.option.dataset.source=a;break;case"chartBar":o.value.componentData[e].props.option.dataset.source=a;break;case"chartLine":o.value.componentData[e].props.option.dataset.source=a;break;case"icon":o.value.componentData[e].props.icon=a;break;default:o.value.componentData[e].props.value=a;break}}};u.query.id?A.getDetail({id:u.query.id}).then(t=>{const{code:a,data:e,msg:s}=t;r.value=!1,a==0&&(o.value=e,d())}):(r.value=!1,o.value=i.value,d());const g=t=>{const{positionSize:{left:a,top:e,width:s,height:n}}=t;return{position:"absolute",left:`${a}px`,top:`${e}px`,width:`${s}px`,height:`${n}px`}},w=()=>({width:`${o.value.width}px`,height:`${o.value.height}px`}),{pool:m}=M(),k={},x=t=>{o.value.componentData.forEach(a=>{a.dataSetting.type=="dev"&&a.dataSetting.params&&t.some(e=>a.dataSetting.params.includes(e))&&y(a)})},$=(t,a)=>{let e=[],s=Object.keys(a),n=Object.keys(t);return s.forEach(p=>{n.includes(p)?t[p]!=a[p]&&e.push(p):e.push(p)}),e};return q(m,()=>{const t=$(k,m);x(t)},{deep:!0}),(t,a)=>{const e=z("ev-loading");return B((l(),c("div",{class:"view-preview",style:w},[(l(!0),c(I,null,V(o.value.componentData,s=>(l(),c("div",{key:s.id,style:F(g(s)),class:"box"},[(l(),L(K(s.name),H(s.props,{preview:!0}),{default:N(()=>[Z(C(s.name=="el-text"?s.props.value:""),1)]),_:2},1040))],4))),128))])),[[e,r.value]])}}});D=R(b,[["__scopeId","data-v-a9302945"]])});export{J as __tla,D as default};
