import{cH as je,cI as Ve,cb as Me,r as q,t as z,cJ as B,d as k,cc as P,o as r,c as w,a1 as x,N as T,aG as O,$ as C,b3 as y,aK as N,H as U,ae as W,an as Pe,u as g,cK as $e,I as X,_ as I,G as Ae,J as G,B as Y,a6 as j,aI as Fe,b as m,a0 as S,cu as He,cv as Je,cd as qe,ce as Be,ci as E,ck as Ge,cl as Ke,cf as Ne,cw as Ue,cm as We,a_ as Xe,cL as Ye,cn as Ee,cM as Re,cB as Le,__tla as Qe}from"./index.d330f3c7.js";let R,Ze=Promise.all([(()=>{try{return Qe}catch{}})()]).then(async()=>{let K,$,A=0,F=0;function L(t,u,p){let o=u&&p||0;const e=u||new Array(16);t=t||{};let c=t.node||K,l=t.clockseq!==void 0?t.clockseq:$;if(c==null||l==null){const n=t.random||(t.rng||je)();c==null&&(c=K=[n[0]|1,n[1],n[2],n[3],n[4],n[5]]),l==null&&(l=$=(n[6]<<8|n[7])&16383)}let s=t.msecs!==void 0?t.msecs:Date.now(),a=t.nsecs!==void 0?t.nsecs:F+1;const d=s-A+(a-F)/1e4;if(d<0&&t.clockseq===void 0&&(l=l+1&16383),(d<0||s>A)&&t.nsecs===void 0&&(a=0),a>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");A=s,F=a,$=l,s+=122192928e5;const f=((s&268435455)*1e4+a)%4294967296;e[o++]=f>>>24&255,e[o++]=f>>>16&255,e[o++]=f>>>8&255,e[o++]=f&255;const h=s/4294967296*1e4&268435455;e[o++]=h>>>8&255,e[o++]=h&255,e[o++]=h>>>24&15|16,e[o++]=h>>>16&255,e[o++]=l>>>8|128,e[o++]=l&255;for(let n=0;n<6;++n)e[o+n]=c[n];return u||Ve(e)}const V=Me("viewStore",()=>{const t=q({componentData:[],name:"",id:"",img:"",height:1080,width:1920}),u=q({name:"",label:"",props:{},id:"",type:"",positionSize:{top:0,left:0,width:100,height:100}}),p=l=>{const{id:s}=l;let a=t.componentData.find(d=>d.id==s);a&&Object.assign(a,{...a,...l})},o=q([]),e=z(0),c=()=>{o[e.value++]=B.exports.cloneDeep(t.componentData)};return{viewData:t,curCompData:u,snapshotData:o,curSnapshotIdx:e,setSnapshot:c,undo:()=>{e.value>0&&(e.value--,t.componentData=B.exports.cloneDeep(o[e.value]))},redo:()=>{e.value<o.length-1&&(e.value++,t.componentData=B.exports.cloneDeep(o[e.value]))},onClickComp:l=>{let s=t.componentData.findIndex(a=>a.id===l.id);s!=-1&&Object.assign(u,t.componentData[s])},setComp:p,addComp:l=>{t.componentData.push(l),c()}}}),Q=k({__name:"ViewDesignContainer",setup(t){const u=V(),{viewData:p,curCompData:o}=P(u),{onClickComp:e,setSnapshot:c,setComp:l,addComp:s}=u,a=z(),d=()=>{const{width:v,height:_}=p.value;return a.value?(console.log(a.value.offsetWidth,a.value.offsetHeight,(a.value.offsetHeight-40)/_),{width:v+"px",height:_+"px",transform:`scale(${(a.value.offsetWidth-40)/v},${(a.value.offsetHeight-40)/_})`,"transform-origin":"0 0 "}):{width:"100%",height:"100%"}},f=v=>{const{nodeKey:_,left:D,top:M,width:H,height:J}=v;l({id:_,positionSize:{left:parseFloat(D),top:parseFloat(M),width:parseFloat(H),height:parseFloat(J)}}),c()},h=v=>{v.preventDefault()},n=v=>{v.preventDefault();let _=JSON.parse(v.dataTransfer.getData("componentData"));_.id=L(),_.positionSize={width:100,height:100,top:v.offsetY,left:v.offsetX},s(_)};return(v,_)=>(r(),w("div",{ref_key:"container",ref:a,class:"view-design-container"},[x("div",{class:"container",style:X(d()),onDragover:h,onDrop:n},[(r(!0),w(T,null,O(g(p).componentData,D=>(r(),C(g($e),Pe({key:D.id,minh:"20",minw:"20","node-key":D.id},D.positionSize,{class:[D.id==g(o).id?"active":"","drag"],onOnDragResize:f,onClick:M=>g(e)(D)}),{default:y(()=>[(r(),C(N(D.name),U(W(D.props)),null,16))]),_:2},1040,["node-key","class","onClick"]))),128))],36)],512))}}),Z=I(Q,[["__scopeId","data-v-c8f70352"]]),ee=[{name:"ev-text",id:"1",type:"text",label:"\u6587\u672C\u7EC4\u4EF6",icon:"icon-text",props:{value:"123"}},{name:"ev-img",id:"2",type:"img",label:"\u56FE\u7247\u7EC4\u4EF6",icon:"icon-tupian",props:{src:"https://img1.baidu.com/it/u=1400131798,3422378849&fm=253&app=138&size=w931&n=0&f=JPEG&fmt=auto?sec=1690304400&t=6836d8acb0adcf55038070c7599815d7"}},{name:"ev-chart",id:"3",type:"chartBar",label:"\u67F1\u72B6\u56FE\u7EC4\u4EF6",icon:"icon-keshihuatubiao-1",props:{option:{xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{data:[120,200,150,80,70,110,130],type:"bar"}]}}}],le={class:"material-container"},ae=["data-component"],te={class:"label"},oe=k({__name:"ViewMaterial",setup(t){const u=p=>{p&&p.target&&p.dataTransfer&&p.dataTransfer.setData("componentData",p.target.getAttribute("data-component"))};return(p,o)=>(r(),w("ul",le,[(r(!0),w(T,null,O(g(ee),e=>(r(),w("li",{key:e.id,class:"material f-ca",draggable:"true","data-component":JSON.stringify(e),onDragstart:u},[x("div",{class:Ae(["iconfont",e.icon])},null,2),x("div",te,G(e.label),1)],40,ae))),128))]))}}),ie=I(oe,[["__scopeId","data-v-64ffc243"]]),se={class:"view-preview"},pe=k({__name:"ViewPreview",props:{data:{type:Object,required:!0}},setup(t){const u=t,{data:p}=Y(u),o=e=>{const{positionSize:{left:c,top:l,width:s,height:a}}=e;return{position:"absolute",left:`${c}px`,top:`${l}px`,width:`${s}px`,height:`${a}px`}};return(e,c)=>(r(),w("div",se,[(r(!0),w(T,null,O(g(p).componentData,l=>(r(),w("div",{key:l.id,style:X(o(l)),class:"box"},[(r(),C(N(l.name),U(W(l.props)),{default:y(()=>[j(G(l.name=="el-text"?l.props.value:""),1)]),_:2},1040))],4))),128))]))}}),ne=I(pe,[["__scopeId","data-v-e2a6b7db"]]),re=[{label:"echart\u914D\u7F6E",ui:{type:"collapse",field:"",props:{},children:[{label:"X\u8F74\u914D\u7F6E",ui:{type:"collapse",field:"",props:{},children:[{label:"X\u8F74\u7C7B\u522B",ui:{field:"props.option.xAxis.type",type:"select",props:{options:[{label:"\u7C7B\u76EE\u8F74",value:"category"},{label:"\u65F6\u95F4\u8F74",value:"time"},{label:"\u6570\u503C\u8F74",value:"value"},{label:"\u5BF9\u6570\u8F74",value:"log"}]}}}]}},{label:"Y\u8F74\u914D\u7F6E",ui:{type:"collapse",field:"",props:{},children:[{label:"Y\u8F74\u7C7B\u522B",ui:{field:"props.option.yAxis.type",type:"select",props:{options:[{label:"\u7C7B\u76EE\u8F74",value:"category"},{label:"\u65F6\u95F4\u8F74",value:"time"},{label:"\u6570\u503C\u8F74",value:"value"},{label:"\u5BF9\u6570\u8F74",value:"log"}]}}}]}},{label:"\u7CFB\u5217",ui:{type:"collapse",field:"",props:{},children:[{label:"\u7C7B\u578B",ui:{type:"select",field:"props.option.series.0.type",props:{options:[{label:"\u67F1\u72B6",value:"bar"},{label:"\u6298\u7EBF",value:"line"}]}}}]}}]}}],ce=Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"})),de=[{label:"\u4F4D\u7F6E\u53CA\u5927\u5C0F\u4FE1\u606F",ui:{type:"collapse",field:"",props:{},children:[{label:"\u8DDD\u9876\u90E8\u9AD8\u5EA6",ui:{type:"number",field:"positionSize.top",props:{}}},{label:"\u8DDD\u5DE6\u4FA7\u8DDD\u79BB",ui:{type:"number",field:"positionSize.left",props:{}}},{label:"\u5BBD\u5EA6",ui:{type:"number",field:"positionSize.width",props:{}}},{label:"\u9AD8\u5EA6",ui:{type:"number",field:"positionSize.height",props:{}}}]}}],ue=Object.freeze(Object.defineProperty({__proto__:null,default:de},Symbol.toStringTag,{value:"Module"})),fe=[{label:"\u7EC4\u4EF6\u5C5E\u6027",ui:{type:"collapse",field:"",props:{},children:[{label:"\u56FE\u7247\u5730\u5740",ui:{props:{},type:"input",field:"props.src"}},{label:"\u6587\u672C\u63CF\u8FF0",ui:{type:"input",props:{},field:"props.alt"}},{label:"\u9002\u914D\u65B9\u5F0F",ui:{type:"select",field:"props.fit",props:{options:[{label:"\u7B49\u6BD4\u7F29\u653E",value:"contain"},{label:"\u7B49\u6BD4\u586B\u5145",value:"cover"},{label:"\u62C9\u4F38\u586B\u5145",value:"fill"},{label:"\u5B9E\u9645\u5C3A\u5BF8",value:"none"}]}}}]}}],ve=Object.freeze(Object.defineProperty({__proto__:null,default:fe},Symbol.toStringTag,{value:"Module"})),me=[{label:"\u7EC4\u4EF6\u5C5E\u6027",ui:{type:"collapse",field:"",props:{},children:[{label:"\u6587\u672C\u5185\u5BB9",ui:{type:"input",props:{},field:"props.value"}},{label:"\u8D85\u94FE\u63A5",ui:{props:{},type:"collapse",field:"",children:[{label:"\u542F\u7528\u8D85\u94FE\u63A5",ui:{type:"switch",props:{},field:"props.openUrl"}},{label:"\u8D85\u94FE\u63A5\u5730\u5740",ui:{type:"input",props:{},field:"props.url"}},{label:"\u6253\u5F00\u65B9\u5F0F",ui:{type:"select",props:{options:[{label:"\u65B0\u9875\u9762",value:"_blank"},{label:"\u5F53\u524D\u9875\u9762",value:"_self"}]},field:"props.openType"}}]}}]}},{label:"\u7EC4\u4EF6\u6837\u5F0F",ui:{type:"collapse",field:"",props:{},children:[{label:"\u9ED8\u8BA4\u6837\u5F0F",ui:{type:"collapse",field:"",props:{},children:[{label:"\u5B57\u4F53\u5927\u5C0F",ui:{props:{},type:"number",field:"props.styleConfig.default.fontSize"}},{label:"\u5B57\u4F53\u989C\u8272",ui:{props:{},type:"color",field:"props.styleConfig.default.color"}},{label:"\u80CC\u666F\u989C\u8272",ui:{props:{},type:"color",field:"props.styleConfig.default.backgroundColor"}}]}},{label:"\u60AC\u6D6E\u6837\u5F0F",ui:{type:"collapse",props:{},field:"",children:[{label:"\u5B57\u4F53\u5927\u5C0F",ui:{props:{},type:"number",field:"props.styleConfig.hover.fontSize"}},{label:"\u5B57\u4F53\u989C\u8272",ui:{props:{},type:"color",field:"props.styleConfig.hover.color"}},{label:"\u80CC\u666F\u989C\u8272",ui:{props:{},type:"color",field:"props.styleConfig.hover.backgroundColor"}}]}}]}}],be=Object.freeze(Object.defineProperty({__proto__:null,default:me},Symbol.toStringTag,{value:"Module"})),ye=k({name:"viewCfg"}),he=k({...ye,props:{template:{default:()=>[]}},setup(t){const u=t,p=V(),{curCompData:o}=P(p),{template:e}=Y(u),c=s=>s.split(".").reduce((a,d)=>typeof a[d]>"u"?"":a[d],o.value),l=(s,a)=>{a.split(".").reduce((d,f,h,n)=>h==n.length-1?(d[f]=s,d[f]):(d[f]||!d[f]&&h<n.length-1&&(d[f]={}),d[f]),o.value)};return(s,a)=>{const d=Fe("view-cfg",!0),f=He,h=Je,n=qe,v=Be,_=E,D=Ge,M=Ke,H=Ne,J=Ue,Ie=We;return r(!0),w(T,null,O(g(e),i=>(r(),w("div",{key:i.label,class:"view-cfg"},[i.ui.type=="collapse"?(r(),C(h,{key:0},{default:y(()=>[m(f,{title:i.label,name:i.label,style:{"padding-left":"10px"}},{default:y(()=>[m(d,{template:i.ui.children},null,8,["template"])]),_:2},1032,["title","name"])]),_:2},1024)):S("",!0),i.ui.type=="input"?(r(),C(v,{key:1,label:i.label},{default:y(()=>[m(n,{type:"textarea",autosize:"","model-value":c(i.ui.field),onInput:b=>l(b,i.ui.field)},null,8,["model-value","onInput"])]),_:2},1032,["label"])):S("",!0),i.ui.type=="number"?(r(),C(v,{key:2,label:i.label},{default:y(()=>[m(_,{"controls-position":"right","model-value":c(i.ui.field),onChange:b=>l(b,i.ui.field)},null,8,["model-value","onChange"])]),_:2},1032,["label"])):S("",!0),i.ui.type=="select"?(r(),C(v,{key:3,label:i.label},{default:y(()=>[m(M,{"model-value":c(i.ui.field),clearable:"",onChange:b=>l(b,i.ui.field)},{default:y(()=>[(r(!0),w(T,null,O(i.ui.props.options,b=>(r(),C(D,{key:b.value,label:b.label,value:b.value},{default:y(()=>[j(G(b.label),1)]),_:2},1032,["label","value"]))),128))]),_:2},1032,["model-value","onChange"])]),_:2},1032,["label"])):S("",!0),i.ui.type=="switch"?(r(),C(v,{key:4,label:i.label},{default:y(()=>[m(H,{"model-value":c(i.ui.field),onChange:b=>l(b,i.ui.field)},null,8,["model-value","onChange"])]),_:2},1032,["label"])):S("",!0),i.ui.type=="color"?(r(),C(v,{key:5,label:i.label},{default:y(()=>[m(J,{"show-alpha":"","model-value":c(i.ui.field),onChange:b=>l(b,i.ui.field)},null,8,["model-value","onChange"])]),_:2},1032,["label"])):S("",!0),i.ui.type=="code"?(r(),C(v,{key:6,label:i.label},{default:y(()=>[m(Ie,{code:c(i.ui.field),onChange:b=>l(b,i.ui.field)},null,8,["code","onChange"])]),_:2},1032,["label"])):S("",!0)]))),128)}}}),ge=I(he,[["__scopeId","data-v-582ba543"]]),_e=k({name:"viewTemplate"}),we=k({..._e,setup(t){const u=V(),{curCompData:p}=P(u);Xe(p.value,()=>{if(p.value&&p.value.type){let l;for(const s in e.value)s.includes(Ye(p.value.type))&&(l=e.value[s].default,o.value=[...c.value,...l])}},{deep:!0});const o=z([]),e=z(),c=z([]);return(async()=>await Object.assign({"/src/assets/view/viewCfgTemplates/cfgChartBarTemplate.ts":ce,"/src/assets/view/viewCfgTemplates/cfgCommonTemplate.ts":ue,"/src/assets/view/viewCfgTemplates/cfgImgTemplate.ts":ve,"/src/assets/view/viewCfgTemplates/cfgTextTemplate.ts":be}))().then(l=>{e.value=l;for(const s in e.value)if(s.includes("Common")){const a=e.value[s];c.value=a.default}}),(l,s)=>{const a=Ee;return r(),C(a,{"label-width":"80px",size:"small"},{default:y(()=>[m(ge,{template:o.value},null,8,["template"])]),_:1})}}}),Ce={class:"view-design f-cs"},De={class:"view-design-header"},ke={class:"container f-rs"},xe={class:"material"},Se={class:"view-design-main"},ze={class:"material-option"},Te=k({name:"viewDesign"}),Oe=k({...Te,setup(t){const u=V(),{undo:p,redo:o}=u,{viewData:e,curCompData:c}=P(u),l=new Re({title:"\u9884\u89C8",size:"large",content:ne,cb:a=>{l.destroyed(),console.log(a)},footer:!1,componentProps:{data:e}}),s=()=>{l.create()};return(a,d)=>{const f=Le,h=E;return r(),w("main",Ce,[x("header",De,[m(f,{onClick:g(p)},{default:y(()=>[j(" \u64A4\u9500 ")]),_:1},8,["onClick"]),m(f,{onClick:g(o)},{default:y(()=>[j(" \u91CD\u505A ")]),_:1},8,["onClick"]),m(f,{onClick:s},{default:y(()=>[j(" \u9884\u89C8 ")]),_:1}),m(h,{modelValue:g(e).width,"onUpdate:modelValue":d[0]||(d[0]=n=>g(e).width=n)},null,8,["modelValue"]),m(h,{modelValue:g(e).height,"onUpdate:modelValue":d[1]||(d[1]=n=>g(e).height=n)},null,8,["modelValue"])]),x("div",ke,[x("aside",xe,[m(ie)]),x("div",Se,[m(Z)]),x("div",ze,[m(we)])])])}}});R=I(Oe,[["__scopeId","data-v-c6e43d01"]])});export{Ze as __tla,R as default};
