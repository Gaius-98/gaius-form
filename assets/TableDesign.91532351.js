import{d as B,r as h,bp as U,o as V,z as S,A as l,b as e,ai as q,br as R,bA as j,bB as Q,u as o,c as N,I as G,Q as L,bx as ie,by as pe,bs as W,bv as ce,bD as me,bE as fe,af as I,b3 as be,B as D,ac as y,ad as _e,C as ge,D as he,a4 as ve,F as we,dU as Ve,dQ as ye,ag as H,aj as xe,bL as Ce,al as ke,am as Fe,an as Ue,_ as De,__tla as ze}from"./index.a32ffdec.js";import{a as Pe,b as Se,c as Be,E as Ie,__tla as Ae}from"./link.e7c818c3.js";import{d as Ee,__tla as Te}from"./vuedraggable.umd.fff7f2ee.js";import{f as J,__tla as qe}from"./api.b65cc899.js";import{E as K,__tla as Re}from"./request.1349c749.js";let M,je=Promise.all([(()=>{try{return ze}catch{}})(),(()=>{try{return Ae}catch{}})(),(()=>{try{return Te}catch{}})(),(()=>{try{return qe}catch{}})(),(()=>{try{return Re}catch{}})()]).then(async()=>{const O=B({__name:"TableField",setup(v,{expose:x}){const f=h(),s=U({}),t=U({prop:[{required:!0,trigger:"blur",message:"\u5B57\u6BB5\u540D\u4E0D\u80FD\u4E3A\u7A7A"}],label:[{required:!0,trigger:"blur",message:"\u5217\u540D\u4E0D\u80FD\u4E3A\u7A7A"}]});return x({getFormData:()=>s,resetForm:()=>{!f.value||f.value.resetFields()},getFormValidate:()=>new Promise((C,b)=>{var d;(d=f.value)==null||d.validate((m,p)=>{C({valid:m,fields:p})})})}),(C,b)=>{const d=q,m=R,p=j;return V(),S(p,{ref_key:"formRef",ref:f,"label-position":"left","label-width":"80",model:s,rules:t},{default:l(()=>[e(m,{prop:"prop",label:"\u5B57\u6BB5\u540D"},{default:l(()=>[e(d,{modelValue:s.prop,"onUpdate:modelValue":b[0]||(b[0]=r=>s.prop=r),placeholder:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u540D",readonly:!1,disabled:!1,clearable:!0,"show-password":!1},null,8,["modelValue"])]),_:1}),e(m,{prop:"label",label:"\u5217\u540D"},{default:l(()=>[e(d,{modelValue:s.label,"onUpdate:modelValue":b[1]||(b[1]=r=>s.label=r),placeholder:"\u8BF7\u8F93\u5165\u5217\u540D",readonly:!1,disabled:!1,clearable:!0,"show-password":!1},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])}}}),X=B({__name:"TableCfg",props:{cfg:{default:()=>({label:"",prop:""})}},setup(v,{expose:x}){const f=v,s=h(),{cfg:t}=Q(f),C=U({}),b=()=>t,d=U([{label:"\u5DE6",value:"left"},{label:"\u53F3",value:"right"}]),m=U([{label:"\u5DE6\u5BF9\u9F50",value:"left"},{label:"\u53F3\u5BF9\u9F50",value:"right"},{label:"\u5C45\u4E2D",value:"center"}]);return x({getFormData:b,resetForm:()=>{!s.value||s.value.resetFields()}}),(p,r)=>{const w=q,c=R,k=ie,z=pe,n=W,E=j;return V(),S(E,{ref_key:"formRef",ref:s,size:"default","label-position":"left","label-width":"120",model:o(t),rules:C},{default:l(()=>[e(c,{prop:"prop",label:"\u5B57\u6BB5\u540D"},{default:l(()=>[e(w,{modelValue:o(t).prop,"onUpdate:modelValue":r[0]||(r[0]=a=>o(t).prop=a),placeholder:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u540D",readonly:!1,disabled:!1,clearable:!0,"show-password":!1},null,8,["modelValue"])]),_:1}),e(c,{prop:"label",label:"\u5217\u540D"},{default:l(()=>[e(w,{modelValue:o(t).label,"onUpdate:modelValue":r[1]||(r[1]=a=>o(t).label=a),placeholder:"\u8BF7\u8F93\u5165\u5217\u540D",readonly:!1,disabled:!1,clearable:!0,"show-password":!1},null,8,["modelValue"])]),_:1}),e(c,{prop:"width",label:"\u5BBD\u5EA6"},{default:l(()=>[e(w,{modelValue:o(t).width,"onUpdate:modelValue":r[2]||(r[2]=a=>o(t).width=a),placeholder:"\u8BF7\u8F93\u5165\u5BBD\u5EA6",readonly:!1,disabled:!1,clearable:!0,"show-password":!1},null,8,["modelValue"])]),_:1}),e(c,{prop:"fixed",label:"\u56FA\u5B9A\u5217"},{default:l(()=>[e(z,{modelValue:o(t).fixed,"onUpdate:modelValue":r[3]||(r[3]=a=>o(t).fixed=a),placeholder:"",readonly:!1,disabled:!1,filterable:!1,clearable:!0},{default:l(()=>[(V(!0),N(G,null,L(d,a=>(V(),S(k,{key:a.value,value:a.value,label:a.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(c,{prop:"sortable",label:"\u662F\u5426\u53EF\u6392\u5E8F"},{default:l(()=>[e(n,{modelValue:o(t).sortable,"onUpdate:modelValue":r[4]||(r[4]=a=>o(t).sortable=a),disabled:!1,"active-text":"\u53EF\u6392\u5E8F","inactive-text":"\u4E0D\u53EF\u6392\u5E8F"},null,8,["modelValue"])]),_:1}),e(c,{prop:"align",label:"\u6587\u5B57\u5BF9\u9F50\u65B9\u5F0F"},{default:l(()=>[e(z,{modelValue:o(t).align,"onUpdate:modelValue":r[5]||(r[5]=a=>o(t).align=a),placeholder:"",readonly:!1,disabled:!1,filterable:!1,clearable:!1},{default:l(()=>[(V(!0),N(G,null,L(m,a=>(V(),S(k,{key:a.value,value:a.value,label:a.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])}}}),Y=B({__name:"GlobalCfg",props:{cfg:{default:()=>({label:"",prop:""})}},setup(v,{expose:x}){const f=v,s=h(),{cfg:t}=Q(f),C=U({});return x({getFormData:()=>t,resetForm:()=>{!s.value||s.value.resetFields()}}),(b,d)=>{const m=W,p=R,r=ce,w=me,c=fe,k=q,z=j;return V(),S(z,{ref_key:"formRef",ref:s,size:"default","label-position":"left","label-width":"120",model:o(t),rules:C},{default:l(()=>[e(c,null,{default:l(()=>[e(w,{title:"\u5206\u9875\u914D\u7F6E",name:"\u5206\u9875\u914D\u7F6E"},{default:l(()=>[e(p,{prop:"pagConfig.show",label:"\u5F00\u542F\u5206\u9875"},{default:l(()=>[e(m,{modelValue:o(t).pagConfig.show,"onUpdate:modelValue":d[0]||(d[0]=n=>o(t).pagConfig.show=n),disabled:!1,"active-text":"","inactive-text":""},null,8,["modelValue"])]),_:1}),e(p,{prop:"pagConfig.pageSize",label:"\u9ED8\u8BA4\u5C55\u793A\u884C\u6570"},{default:l(()=>[e(r,{modelValue:o(t).pagConfig.pageSize,"onUpdate:modelValue":d[1]||(d[1]=n=>o(t).pagConfig.pageSize=n),readonly:!1,disabled:!1,step:1,min:0,max:100,placeholder:"\u8F93\u5165\u63D0\u793A","controls-position":"right"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,null,{default:l(()=>[e(w,{title:"\u65B0\u589E\u914D\u7F6E",name:"\u65B0\u589E\u914D\u7F6E"},{default:l(()=>[e(p,{prop:"add.show",label:"\u5F00\u542F\u65B0\u589E\u529F\u80FD"},{default:l(()=>[e(m,{modelValue:o(t).add.show,"onUpdate:modelValue":d[2]||(d[2]=n=>o(t).add.show=n),disabled:!1,"active-text":"","inactive-text":""},null,8,["modelValue"])]),_:1}),e(p,{prop:"add.id",label:"\u8868\u5355ID"},{default:l(()=>[e(k,{modelValue:o(t).add.id,"onUpdate:modelValue":d[3]||(d[3]=n=>o(t).add.id=n),placeholder:"\u8F93\u5165\u63D0\u793A",readonly:!1,disabled:!1,clearable:!0,"show-password":!1},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,null,{default:l(()=>[e(w,{title:"\u7F16\u8F91\u914D\u7F6E",name:"\u7F16\u8F91\u914D\u7F6E"},{default:l(()=>[e(p,{prop:"edit.show",label:"\u5F00\u542F\u7F16\u8F91\u529F\u80FD"},{default:l(()=>[e(m,{modelValue:o(t).edit.show,"onUpdate:modelValue":d[4]||(d[4]=n=>o(t).edit.show=n),disabled:!1,"active-text":"","inactive-text":""},null,8,["modelValue"])]),_:1}),e(p,{prop:"edit.id",label:"\u8868\u5355ID"},{default:l(()=>[e(k,{modelValue:o(t).edit.id,"onUpdate:modelValue":d[5]||(d[5]=n=>o(t).edit.id=n),placeholder:"\u8F93\u5165\u63D0\u793A",readonly:!1,disabled:!1,clearable:!0,"show-password":!1},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),A=v=>(Fe("data-v-5881c1dd"),v=v(),Ue(),v),Z={class:"table-design"},$={class:"table-container"},ee=["onClick"],le=A(()=>D("span",{style:{"font-size":"10px",color:"#ccc"}},"(\u6CE8\uFF1A\u53EA\u5C55\u793A\u524D10\u6761\u6570\u636E)",-1)),ae=A(()=>D("div",{class:"filter"},null,-1)),te={class:"btns"},oe=A(()=>D("i",{class:"iconfont icon-bianji"},null,-1)),de={class:"table-cfg"},se=B({__name:"TableDesign",setup(v){const x=h({label:"",prop:""}),f=h(""),s=U({columns:[{label:"\u65E5\u671F",prop:"date",children:[]},{label:"\u59D3\u540D",prop:"name"},{label:"\u5730\u5740",prop:"address"}],opt:{show:!1}}),t=h({type:"static",data:[{date:"2016-05-02",name:"\u738B\u5C0F\u864E",address:"\u4E0A\u6D77\u5E02\u666E\u9640\u533A\u91D1\u6C99\u6C5F\u8DEF 1518 \u5F04"},{date:"2016-05-04",name:"\u738B\u5C0F\u864E",address:"\u4E0A\u6D77\u5E02\u666E\u9640\u533A\u91D1\u6C99\u6C5F\u8DEF 1517 \u5F04"},{date:"2016-05-01",name:"\u738B\u5C0F\u864E",address:"\u4E0A\u6D77\u5E02\u666E\u9640\u533A\u91D1\u6C99\u6C5F\u8DEF 1519 \u5F04"},{date:"2016-05-03",name:"\u738B\u5C0F\u864E",address:"\u4E0A\u6D77\u5E02\u666E\u9640\u533A\u91D1\u6C99\u6C5F\u8DEF 1516 \u5F04"}],reqType:"get",params:{},handleFunc:"return resData",interfaceUrl:"http://xxxx"}),C=h(),b=h([]),d=h({pagConfig:{show:!1,pageSize:10,total:10},add:{show:!0,id:32},edit:{show:!0,id:32}}),m=a=>{f.value=a,x.value=s.columns.find(i=>i.prop==a)},p=I({title:"\u65B0\u589E\u5217\u8868\u5B57\u6BB5",content:O,componentProps:{},width:400,height:200}),r=()=>{p.open(async a=>{const{valid:i}=await a.data.getFormValidate(),u=a.data.getFormData();i&&(s.columns.push({label:u.label,prop:u.prop}),p.destroyed())})},w=(a,i)=>{const u=i.attrs.field,_=s.columns.findIndex(F=>F.prop==u);_!=-1&&s.columns.splice(_,1)},c=h(!1),k=async()=>{c.value=!0;const a=await Ve(t.value);b.value=a.slice(0,9),c.value=!1},z=()=>{const a=I({title:"\u6570\u636E\u6E90\u914D\u7F6E",content:ye,height:820,componentProps:{data:t.value}});a.open(({type:i,data:u})=>{console.log(i,u,u.data),i=="ok"&&(t.value=u.data),k(),a.destroyed()})};k();const n=()=>{J.getDetail({id:Number(d.value.add.id)}).then(a=>{const{code:i,data:u,msg:_}=a;if(i==0){const F=I({title:"\u65B0\u589E",content:H,componentProps:{formConfig:u}});F.open(P=>{console.log(P.data.getFormData()),F.destroyed()})}else K.error(_)})},E=a=>{console.log(a),J.getDetail({id:Number(d.value.edit.id)}).then(i=>{const{code:u,data:_,msg:F}=i;if(u==0){const P=I({title:"\u7F16\u8F91",content:H,componentProps:{formConfig:_,formData:a.row}});P.open(T=>{console.log(T.data.getFormData()),P.destroyed()})}else K.error(F)})};return be(()=>{d.value.edit.show?s.opt.show=!0:s.opt.show=!1}),(a,i)=>{const u=xe,_=Ce,F=Pe,P=Se,T=Be,re=Ie,ue=ke;return V(),N("div",Z,[D("div",$,[e(u,{type:"primary",onClick:z},{default:l(()=>[y(" \u6570\u636E\u6E90\u914D\u7F6E ")]),_:1}),e(u,{type:"primary",icon:o(_e),onClick:r},{default:l(()=>[y(" \u65B0\u589E\u5B57\u6BB5 ")]),_:1},8,["icon"]),e(_,null,{default:l(()=>[y(" \u914D\u7F6E\u5217 ")]),_:1}),e(o(Ee),{modelValue:s.columns,"onUpdate:modelValue":i[0]||(i[0]=g=>s.columns=g),"item-key":"prop",class:"table-header"},{item:l(({element:g})=>[e(T,{trigger:"contextmenu",onCommand:w},{dropdown:l(()=>[e(P,null,{default:l(()=>[e(F,{command:"delete",field:g.prop},{default:l(()=>[y(" \u5220\u9664 ")]),_:2},1032,["field"])]),_:2},1024)]),default:l(()=>[D("div",{class:ge(["header-cell",f.value==g.prop?"cur-column":""]),style:he({width:g.width?g.width+"px":"auto"}),onClick:ne=>m(g.prop)},ve(g.label),15,ee)]),_:2},1024)]),_:1},8,["modelValue"]),e(_,null,{default:l(()=>[y(" \u9884\u89C8\u533A\u57DF "),le]),_:1}),ae,D("div",te,[d.value.add.show?(V(),S(u,{key:0,type:"primary",onClick:n},{default:l(()=>[y(" \u65B0\u589E ")]),_:1})):we("",!0)]),e(ue,{ref_key:"table",ref:C,data:b.value,"table-config":s,"pag-config":d.value.pagConfig,border:"",height:"680",loading:c.value},{opt:l(g=>[e(re,{type:"primary",onClick:ne=>E(g)},{default:l(()=>[oe,y(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])]),_:1},8,["data","table-config","pag-config","loading"])]),D("div",de,[e(_,null,{default:l(()=>[y(" \u5168\u5C40\u914D\u7F6E ")]),_:1}),e(Y,{cfg:d.value},null,8,["cfg"]),e(_,{style:{"margin-top":"20px"}},{default:l(()=>[y(" \u5F53\u524D\u5217\u914D\u7F6E ")]),_:1}),e(X,{cfg:x.value},null,8,["cfg"])])])}}});M=De(se,[["__scopeId","data-v-5881c1dd"]])});export{je as __tla,M as default};
