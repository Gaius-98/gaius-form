import{cH as Te,cI as Oe,cb as Ie,r as N,t as T,cJ as U,d as k,cc as $,o as r,c as C,a1 as S,N as O,aG as I,$ as D,b3 as v,aK as B,H as E,ae as K,a6 as x,J as M,an as je,u as _,cK as Ve,I as L,_ as j,G as Pe,B as R,aI as $e,b,a0 as z,cu as Me,cv as He,cd as Je,ce as qe,ci as W,ck as Fe,cl as Ge,cf as Ne,cw as Ue,a_ as Ae,cL as Be,cn as Ee,cM as Ke,cB as Le,__tla as Re}from"./index.06a72d7b.js";let X,We=Promise.all([(()=>{try{return Re}catch{}})()]).then(async()=>{let A,H,J=0,q=0;function Y(t,c,i){let o=c&&i||0;const e=c||new Array(16);t=t||{};let d=t.node||A,l=t.clockseq!==void 0?t.clockseq:H;if(d==null||l==null){const p=t.random||(t.rng||Te)();d==null&&(d=A=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),l==null&&(l=H=(p[6]<<8|p[7])&16383)}let s=t.msecs!==void 0?t.msecs:Date.now(),a=t.nsecs!==void 0?t.nsecs:q+1;const u=s-J+(a-q)/1e4;if(u<0&&t.clockseq===void 0&&(l=l+1&16383),(u<0||s>J)&&t.nsecs===void 0&&(a=0),a>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");J=s,q=a,H=l,s+=122192928e5;const f=((s&268435455)*1e4+a)%4294967296;e[o++]=f>>>24&255,e[o++]=f>>>16&255,e[o++]=f>>>8&255,e[o++]=f&255;const g=s/4294967296*1e4&268435455;e[o++]=g>>>8&255,e[o++]=g&255,e[o++]=g>>>24&15|16,e[o++]=g>>>16&255,e[o++]=l>>>8|128,e[o++]=l&255;for(let p=0;p<6;++p)e[o+p]=d[p];return c||Oe(e)}const V=Ie("viewStore",()=>{const t=N({componentData:[],name:"",id:"",img:"",height:1080,width:1920}),c=N({name:"",label:"",props:{},id:"",type:"",positionSize:{top:0,left:0,width:100,height:100}}),i=l=>{const{id:s}=l;let a=t.componentData.find(u=>u.id==s);a&&Object.assign(a,{...a,...l})},o=N([]),e=T(0),d=()=>{o[e.value++]=U.exports.cloneDeep(t.componentData)};return{viewData:t,curCompData:c,snapshotData:o,curSnapshotIdx:e,setSnapshot:d,undo:()=>{e.value>0&&(e.value--,t.componentData=U.exports.cloneDeep(o[e.value]))},redo:()=>{e.value<o.length-1&&(e.value++,t.componentData=U.exports.cloneDeep(o[e.value]))},onClickComp:l=>{let s=t.componentData.findIndex(a=>a.id===l.id);s!=-1&&Object.assign(c,t.componentData[s])},setComp:i,addComp:l=>{t.componentData.push(l),d()}}}),Q=k({__name:"ViewDesignContainer",setup(t){const c=V(),{viewData:i,curCompData:o}=$(c),{onClickComp:e,setSnapshot:d,setComp:l,addComp:s}=c,a=T(),u=()=>{const{width:m,height:w}=i.value;return a.value?(console.log(a.value.offsetWidth,a.value.offsetHeight,(a.value.offsetHeight-40)/w),{width:m+"px",height:w+"px",transform:`scale(${(a.value.offsetWidth-40)/m},${(a.value.offsetHeight-40)/w})`,"transform-origin":"0 0 "}):{width:"100%",height:"100%"}},f=m=>{const{nodeKey:w,left:y,top:P,width:F,height:G}=m;l({id:w,positionSize:{left:parseFloat(y),top:parseFloat(P),width:parseFloat(F),height:parseFloat(G)}}),d()},g=m=>{m.preventDefault()},p=m=>{m.preventDefault();let w=JSON.parse(m.dataTransfer.getData("componentData"));w.id=Y(),w.positionSize={width:100,height:100,top:m.offsetY,left:m.offsetX},s(w)};return(m,w)=>(r(),C("div",{ref_key:"container",ref:a,class:"view-design-container"},[S("div",{class:"container",style:L(u()),onDragover:g,onDrop:p},[(r(!0),C(O,null,I(_(i).componentData,y=>(r(),D(_(Ve),je({key:y.id,minh:"20",minw:"20","node-key":y.id},y.positionSize,{class:[y.id==_(o).id?"active":"","drag"],onOnDragResize:f,onClick:P=>_(e)(y)}),{default:v(()=>[(r(),D(B(y.name),E(K(y.props)),{default:v(()=>[x(M(y.name=="el-text"?y.props.value:""),1)]),_:2},1040))]),_:2},1040,["node-key","class","onClick"]))),128))],36)],512))}}),Z=j(Q,[["__scopeId","data-v-bfee6417"]]),ee=[{name:"ev-text",id:"1",type:"text",label:"\u6587\u672C\u7EC4\u4EF6",icon:"icon-text",props:{value:"123"}},{name:"ev-img",id:"2",type:"img",label:"\u56FE\u7247\u7EC4\u4EF6",icon:"icon-tupian",props:{src:"https://img1.baidu.com/it/u=1400131798,3422378849&fm=253&app=138&size=w931&n=0&f=JPEG&fmt=auto?sec=1690304400&t=6836d8acb0adcf55038070c7599815d7"}}],le={class:"material-container"},ae=["data-component"],te={class:"label"},oe=k({__name:"ViewMaterial",setup(t){const c=i=>{i&&i.target&&i.dataTransfer&&i.dataTransfer.setData("componentData",i.target.getAttribute("data-component"))};return(i,o)=>(r(),C("ul",le,[(r(!0),C(O,null,I(_(ee),e=>(r(),C("li",{key:e.id,class:"material f-ca",draggable:"true","data-component":JSON.stringify(e),onDragstart:c},[S("div",{class:Pe(["iconfont",e.icon])},null,2),S("div",te,M(e.label),1)],40,ae))),128))]))}}),se=j(oe,[["__scopeId","data-v-64ffc243"]]),ne={class:"view-preview"},ie=k({__name:"ViewPreview",props:{data:{type:Object,required:!0}},setup(t){const c=t,{data:i}=R(c),o=e=>{const{positionSize:{left:d,top:l,width:s,height:a}}=e;return{position:"absolute",left:`${d}px`,top:`${l}px`,width:`${s}px`,height:`${a}px`}};return(e,d)=>(r(),C("div",ne,[(r(!0),C(O,null,I(_(i).componentData,l=>(r(),C("div",{key:l.id,style:L(o(l)),class:"box"},[(r(),D(B(l.name),E(K(l.props)),{default:v(()=>[x(M(l.name=="el-text"?l.props.value:""),1)]),_:2},1040))],4))),128))]))}}),pe=j(ie,[["__scopeId","data-v-e2a6b7db"]]),ue=[{label:"\u4F4D\u7F6E\u53CA\u5927\u5C0F\u4FE1\u606F",ui:{type:"collapse",field:"",props:{},children:[{label:"\u8DDD\u9876\u90E8\u9AD8\u5EA6",ui:{type:"number",field:"positionSize.top",props:{}}},{label:"\u8DDD\u5DE6\u4FA7\u8DDD\u79BB",ui:{type:"number",field:"positionSize.left",props:{}}},{label:"\u5BBD\u5EA6",ui:{type:"number",field:"positionSize.width",props:{}}},{label:"\u9AD8\u5EA6",ui:{type:"number",field:"positionSize.height",props:{}}}]}}],re=Object.freeze(Object.defineProperty({__proto__:null,default:ue},Symbol.toStringTag,{value:"Module"})),de=[{label:"\u7EC4\u4EF6\u5C5E\u6027",ui:{type:"collapse",field:"",props:{},children:[{label:"\u56FE\u7247\u5730\u5740",ui:{props:{},type:"input",field:"props.src"}},{label:"\u6587\u672C\u63CF\u8FF0",ui:{type:"input",props:{},field:"props.alt"}},{label:"\u9002\u914D\u65B9\u5F0F",ui:{type:"select",field:"props.fit",props:{options:[{label:"\u7B49\u6BD4\u7F29\u653E",value:"contain"},{label:"\u7B49\u6BD4\u586B\u5145",value:"cover"},{label:"\u62C9\u4F38\u586B\u5145",value:"fill"},{label:"\u5B9E\u9645\u5C3A\u5BF8",value:"none"}]}}}]}}],ce=Object.freeze(Object.defineProperty({__proto__:null,default:de},Symbol.toStringTag,{value:"Module"})),fe=[{label:"\u7EC4\u4EF6\u5C5E\u6027",ui:{type:"collapse",field:"",props:{},children:[{label:"\u6587\u672C\u5185\u5BB9",ui:{type:"input",props:{},field:"props.value"}},{label:"\u8D85\u94FE\u63A5",ui:{props:{},type:"collapse",field:"",children:[{label:"\u542F\u7528\u8D85\u94FE\u63A5",ui:{type:"switch",props:{},field:"props.openUrl"}},{label:"\u8D85\u94FE\u63A5\u5730\u5740",ui:{type:"input",props:{},field:"props.url"}},{label:"\u6253\u5F00\u65B9\u5F0F",ui:{type:"select",props:{options:[{label:"\u65B0\u9875\u9762",value:"_blank"},{label:"\u5F53\u524D\u9875\u9762",value:"_self"}]},field:"props.openType"}}]}}]}},{label:"\u7EC4\u4EF6\u6837\u5F0F",ui:{type:"collapse",field:"",props:{},children:[{label:"\u9ED8\u8BA4\u6837\u5F0F",ui:{type:"collapse",field:"",props:{},children:[{label:"\u5B57\u4F53\u5927\u5C0F",ui:{props:{},type:"number",field:"props.styleConfig.default.fontSize"}},{label:"\u5B57\u4F53\u989C\u8272",ui:{props:{},type:"color",field:"props.styleConfig.default.color"}},{label:"\u80CC\u666F\u989C\u8272",ui:{props:{},type:"color",field:"props.styleConfig.default.backgroundColor"}}]}},{label:"\u60AC\u6D6E\u6837\u5F0F",ui:{type:"collapse",props:{},field:"",children:[{label:"\u5B57\u4F53\u5927\u5C0F",ui:{props:{},type:"number",field:"props.styleConfig.hover.fontSize"}},{label:"\u5B57\u4F53\u989C\u8272",ui:{props:{},type:"color",field:"props.styleConfig.hover.color"}},{label:"\u80CC\u666F\u989C\u8272",ui:{props:{},type:"color",field:"props.styleConfig.hover.backgroundColor"}}]}}]}}],me=Object.freeze(Object.defineProperty({__proto__:null,default:fe},Symbol.toStringTag,{value:"Module"})),ve=k({name:"viewCfg"}),be=k({...ve,props:{template:{default:()=>[]}},setup(t){const c=t,i=V(),{curCompData:o}=$(i),{template:e}=R(c),d=s=>s.split(".").reduce((a,u)=>typeof a[u]>"u"?"":a[u],o.value),l=(s,a)=>{a.split(".").reduce((u,f,g,p)=>g==p.length-1?(u[f]=s,u[f]):(u[f]||!u[f]&&g<p.length-1&&(u[f]={}),u[f]),o.value)};return(s,a)=>{const u=$e("view-cfg",!0),f=Me,g=He,p=Je,m=qe,w=W,y=Fe,P=Ge,F=Ne,G=Ue;return r(!0),C(O,null,I(_(e),n=>(r(),C("div",{key:n.label,class:"view-cfg"},[n.ui.type=="collapse"?(r(),D(g,{key:0},{default:v(()=>[b(f,{title:n.label,name:n.label,style:{"padding-left":"10px"}},{default:v(()=>[b(u,{template:n.ui.children},null,8,["template"])]),_:2},1032,["title","name"])]),_:2},1024)):z("",!0),n.ui.type=="input"?(r(),D(m,{key:1,label:n.label},{default:v(()=>[b(p,{type:"textarea",autosize:"","model-value":d(n.ui.field),onInput:h=>l(h,n.ui.field)},null,8,["model-value","onInput"])]),_:2},1032,["label"])):z("",!0),n.ui.type=="number"?(r(),D(m,{key:2,label:n.label},{default:v(()=>[b(w,{"controls-position":"right","model-value":d(n.ui.field),onChange:h=>l(h,n.ui.field)},null,8,["model-value","onChange"])]),_:2},1032,["label"])):z("",!0),n.ui.type=="select"?(r(),D(m,{key:3,label:n.label},{default:v(()=>[b(P,{"model-value":d(n.ui.field),clearable:"",onChange:h=>l(h,n.ui.field)},{default:v(()=>[(r(!0),C(O,null,I(n.ui.props.options,h=>(r(),D(y,{key:h.value,label:h.label,value:h.value},{default:v(()=>[x(M(h.label),1)]),_:2},1032,["label","value"]))),128))]),_:2},1032,["model-value","onChange"])]),_:2},1032,["label"])):z("",!0),n.ui.type=="switch"?(r(),D(m,{key:4,label:n.label},{default:v(()=>[b(F,{"model-value":d(n.ui.field),onChange:h=>l(h,n.ui.field)},null,8,["model-value","onChange"])]),_:2},1032,["label"])):z("",!0),n.ui.type=="color"?(r(),D(m,{key:5,label:n.label},{default:v(()=>[b(G,{"show-alpha":"","model-value":d(n.ui.field),onChange:h=>l(h,n.ui.field)},null,8,["model-value","onChange"])]),_:2},1032,["label"])):z("",!0)]))),128)}}}),ge=j(be,[["__scopeId","data-v-44e08c65"]]),he=k({name:"viewTemplate"}),ye=k({...he,setup(t){const c=V(),{curCompData:i}=$(c);Ae(i.value,()=>{if(i.value&&i.value.type){let l;for(const s in e.value)s.includes(Be(i.value.type))&&(l=e.value[s].default,o.value=[...d.value,...l])}},{deep:!0});const o=T([]),e=T(),d=T([]);return(async()=>await Object.assign({"/src/assets/view/viewCfgTemplates/cfgCommonTemplate.ts":re,"/src/assets/view/viewCfgTemplates/cfgImgTemplate.ts":ce,"/src/assets/view/viewCfgTemplates/cfgTextTemplate.ts":me}))().then(l=>{e.value=l;for(const s in e.value)if(s.includes("Common")){const a=e.value[s];d.value=a.default}}),(l,s)=>{const a=Ee;return r(),D(a,{"label-width":"80px",size:"small"},{default:v(()=>[b(ge,{template:o.value},null,8,["template"])]),_:1})}}}),_e={class:"view-design f-cs"},we={class:"view-design-header"},Ce={class:"container f-rs"},De={class:"material"},ke={class:"view-design-main"},Se={class:"material-option"},xe=k({name:"viewDesign"}),ze=k({...xe,setup(t){const c=V(),{undo:i,redo:o}=c,{viewData:e,curCompData:d}=$(c),l=new Ke({title:"\u9884\u89C8",size:"large",content:pe,cb:a=>{l.destroyed(),console.log(a)},footer:!1,componentProps:{data:e}}),s=()=>{l.create()};return(a,u)=>{const f=Le,g=W;return r(),C("main",_e,[S("header",we,[b(f,{onClick:_(i)},{default:v(()=>[x(" \u64A4\u9500 ")]),_:1},8,["onClick"]),b(f,{onClick:_(o)},{default:v(()=>[x(" \u91CD\u505A ")]),_:1},8,["onClick"]),b(f,{onClick:s},{default:v(()=>[x(" \u9884\u89C8 ")]),_:1}),b(g,{modelValue:_(e).width,"onUpdate:modelValue":u[0]||(u[0]=p=>_(e).width=p)},null,8,["modelValue"]),b(g,{modelValue:_(e).height,"onUpdate:modelValue":u[1]||(u[1]=p=>_(e).height=p)},null,8,["modelValue"])]),S("div",Ce,[S("aside",De,[b(se)]),S("div",ke,[b(Z)]),S("div",Se,[b(ye)])])])}}});X=j(ze,[["__scopeId","data-v-c6e43d01"]])});export{We as __tla,X as default};
