import{aK as j,aL as g,r as _,dA as c,ae as O,__tla as k}from"./index.c4f7cc90.js";let C,b,F=Promise.all([(()=>{try{return k}catch{}})()]).then(async()=>{let f;b=j("viewStore",()=>{const t=g({componentData:[],name:"",id:"",img:"",height:1080,width:1920}),i=g({name:"",label:"",props:{},id:"",type:"",dataSetting:{type:"static",data:"",handleFunc:"",params:{}},positionSize:{top:0,left:0,width:100,height:100}}),D=a=>{const{id:o}=a;let n=t.componentData.find(h=>h.id==o);n&&Object.assign(n,{...n,...a})},p=g([]),e=_(0),s=()=>{p[e.value++]=c.exports.cloneDeep(t.componentData)},d=()=>{e.value>0&&(e.value--,t.componentData=c.exports.cloneDeep(p[e.value]))},l=()=>{e.value<p.length-1&&(e.value++,t.componentData=c.exports.cloneDeep(p[e.value]))},w=a=>{let o=t.componentData.findIndex(n=>n.id===a.id);o!=-1&&Object.assign(i,c.exports.cloneDeep(t.componentData[o]))},m=()=>{let a=t.componentData.findIndex(o=>o.id===i.id);a!=-1&&Object.assign(t.componentData[a],c.exports.cloneDeep(i))},r=a=>{t.componentData.push(a),s()},u=(a,o)=>{let n=t.componentData.findIndex(S=>S.id===o),h=t.componentData[n];switch(a){case"delete":t.componentData.splice(n,1);break;case"placeTop":t.componentData.splice(n,1),t.componentData.push(h);break;case"placeBottom":t.componentData.splice(n,1),t.componentData.unshift(h);break}s()},x=()=>{Object.assign(t,{componentData:[],name:"",id:"",img:"",height:1080,width:1920}),y()},v=a=>{Object.assign(t,a)},y=()=>{Object.assign(i,{name:"",label:"",props:{},id:"",type:"",dataSetting:{type:"static",data:"",handleFunc:"",params:{}},positionSize:{top:0,left:0,width:100,height:100}})};return{viewData:t,curCompData:i,snapshotData:p,curSnapshotIdx:e,setSnapshot:s,undo:d,redo:l,onClickComp:w,setComp:D,addComp:r,changeCompByCommand:u,init:x,setViewData:v,initCurComp:y,syncCfg:m}}),f=async t=>{const{dataSetting:{type:i,data:D,params:p,handleFunc:e,interfaceUrl:s},id:d}=t;return new Promise((l,w)=>{i=="static"?l({id:d,data:D}):O({url:s,method:"post",params:p}).then(m=>{let r=m;if(e)try{r=new Function("resData",e)(m)}catch(u){console.warn("\u5904\u7406\u51FD\u6570\u6267\u884C\u5931\u8D25",u)}l({id:d,data:r})})})},C=f});export{F as __tla,C as a,b as u};
