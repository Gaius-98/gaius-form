import{cH as ue,cI as me,cb as fe,r as z,t as P,cJ as I,d as C,cc as j,o as p,c as w,a1 as _,N as $,aG as O,$ as J,b3 as b,aK as B,H as K,ae as T,a6 as k,J as q,an as ve,u,cK as he,I as E,_ as x,B as ge,cL as we,b as D,cB as De,ci as _e,aD as be,aB as Ce,__tla as ke}from"./index.d89f7eb1.js";let G,xe=Promise.all([(()=>{try{return ke}catch{}})()]).then(async()=>{let F,y,S=0,V=0;function M(a,c,i){let o=c&&i||0;const e=c||new Array(16);a=a||{};let r=a.node||F,t=a.clockseq!==void 0?a.clockseq:y;if(r==null||t==null){const s=a.random||(a.rng||ue)();r==null&&(r=F=[s[0]|1,s[1],s[2],s[3],s[4],s[5]]),t==null&&(t=y=(s[6]<<8|s[7])&16383)}let l=a.msecs!==void 0?a.msecs:Date.now(),n=a.nsecs!==void 0?a.nsecs:V+1;const m=l-S+(n-V)/1e4;if(m<0&&a.clockseq===void 0&&(t=t+1&16383),(m<0||l>S)&&a.nsecs===void 0&&(n=0),n>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");S=l,V=n,y=t,l+=122192928e5;const v=((l&268435455)*1e4+n)%4294967296;e[o++]=v>>>24&255,e[o++]=v>>>16&255,e[o++]=v>>>8&255,e[o++]=v&255;const g=l/4294967296*1e4&268435455;e[o++]=g>>>8&255,e[o++]=g&255,e[o++]=g>>>24&15|16,e[o++]=g>>>16&255,e[o++]=t>>>8|128,e[o++]=t&255;for(let s=0;s<6;++s)e[o+s]=r[s];return c||me(e)}const H=fe("viewStore",()=>{const a=z({componentData:[],name:"",id:"",img:"",height:1080,width:1920}),c=z({name:"",label:"",props:{},id:"",positionSize:{top:0,left:0,width:100,height:100}}),i=t=>{const{id:l}=t;let n=a.componentData.find(m=>m.id==l);n&&Object.assign(n,{...n,...t})},o=z([]),e=P(0),r=()=>{o[e.value++]=I.exports.cloneDeep(a.componentData)};return{viewData:a,curCompData:c,snapshotData:o,curSnapshotIdx:e,setSnapshot:r,undo:()=>{e.value>0&&(e.value--,a.componentData=I.exports.cloneDeep(o[e.value]))},redo:()=>{e.value<o.length-1&&(e.value++,a.componentData=I.exports.cloneDeep(o[e.value]))},onClickComp:t=>{let l=a.componentData.findIndex(n=>n.id===t.id);l!=-1&&Object.assign(c,a.componentData[l])},setComp:i,addComp:t=>{a.componentData.push(t),r()}}}),U=C({__name:"ViewDesignContainer",setup(a){const c=H(),{viewData:i,curCompData:o}=j(c),{onClickComp:e,setSnapshot:r,setComp:t,addComp:l}=c,n=P(),m=()=>{const{width:d,height:h}=i.value;return n.value?(console.log(n.value.offsetWidth,n.value.offsetHeight,(n.value.offsetHeight-40)/h),{width:d+"px",height:h+"px",transform:`scale(${(n.value.offsetWidth-40)/d},${(n.value.offsetHeight-40)/h})`,"transform-origin":"0 0 "}):{width:"100%",height:"100%"}},v=d=>{const{nodeKey:h,left:f,top:N,width:de,height:pe}=d;t({id:h,positionSize:{left:parseFloat(f),top:parseFloat(N),width:parseFloat(de),height:parseFloat(pe)}}),r()},g=d=>{d.preventDefault()},s=d=>{d.preventDefault();let h=JSON.parse(d.dataTransfer.getData("componentData"));h.id=M(),h.positionSize={width:100,height:100,top:d.offsetY,left:d.offsetX},l(h)};return(d,h)=>(p(),w("div",{ref_key:"container",ref:n,class:"view-design-container"},[_("div",{class:"container",style:E(m()),onDragover:g,onDrop:s},[(p(!0),w($,null,O(u(i).componentData,f=>(p(),J(u(he),ve({key:f.id,minh:"20",minw:"20","node-key":f.id},f.positionSize,{class:[f.id==u(o).id?"active":"","drag"],onOnDragResize:v,onClick:N=>u(e)(f)}),{default:b(()=>[(p(),J(B(f.name),K(T(f.props)),{default:b(()=>[k(q(f.name=="el-text"?f.props.value:""),1)]),_:2},1040))]),_:2},1040,["node-key","class","onClick"]))),128))],36)],512))}}),W=x(U,[["__scopeId","data-v-bfee6417"]]),A=[{name:"ev-text",id:"1",label:"\u6587\u672C\u7EC4\u4EF6",props:{value:"123"}},{name:"ev-img",id:"2",label:"\u56FE\u7247\u7EC4\u4EF6",props:{src:"https://img1.baidu.com/it/u=1400131798,3422378849&fm=253&app=138&size=w931&n=0&f=JPEG&fmt=auto?sec=1690304400&t=6836d8acb0adcf55038070c7599815d7"}}],L={class:"material-container"},R=["component"],X=C({__name:"ViewMaterial",setup(a){const c=i=>{console.log(i),i&&i.target&&i.dataTransfer&&i.dataTransfer.setData("componentData",JSON.stringify(i.target.__vnode.props.component))};return(i,o)=>(p(),w("ul",L,[(p(!0),w($,null,O(u(A),e=>(p(),w("li",{key:e.id,class:"material",draggable:"true",component:e,onDragstart:c},q(e.label),41,R))),128))]))}}),Y=x(X,[["__scopeId","data-v-c66a71c6"]]),Q={class:"view-preview"},Z=C({__name:"ViewPreview",props:{data:{type:Object,required:!0}},setup(a){const c=a,{data:i}=ge(c),o=e=>{const{positionSize:{left:r,top:t,width:l,height:n}}=e;return{position:"absolute",left:`${r}px`,top:`${t}px`,width:`${l}px`,height:`${n}px`}};return(e,r)=>(p(),w("div",Q,[(p(!0),w($,null,O(u(i).componentData,t=>(p(),w("div",{key:t.id,style:E(o(t)),class:"box"},[(p(),J(B(t.name),K(T(t.props)),{default:b(()=>[k(q(t.name=="el-text"?t.props.value:""),1)]),_:2},1040))],4))),128))]))}}),ee=x(Z,[["__scopeId","data-v-af73bf20"]]),ae=a=>(be("data-v-c80949b7"),a=a(),Ce(),a),te={class:"view-design f-cs"},oe={class:"view-design-header"},ne={class:"container f-rs"},se={class:"material"},ie={class:"view-design-main"},le=ae(()=>_("div",{class:"material-option"},null,-1)),ce=C({name:"viewDesign"}),re=C({...ce,setup(a){const c=H(),{undo:i,redo:o}=c,{viewData:e,curCompData:r}=j(c),t=new we({title:"\u9884\u89C8",size:"large",content:ee,cb:n=>{t.destroyed(),console.log(n)},footer:!1,componentProps:{data:e}}),l=()=>{t.create()};return(n,m)=>{const v=De,g=_e;return p(),w("main",te,[_("header",oe,[D(v,{onClick:u(i)},{default:b(()=>[k(" \u64A4\u9500 ")]),_:1},8,["onClick"]),D(v,{onClick:u(o)},{default:b(()=>[k(" \u91CD\u505A ")]),_:1},8,["onClick"]),D(v,{onClick:l},{default:b(()=>[k(" \u9884\u89C8 ")]),_:1}),D(g,{modelValue:u(e).width,"onUpdate:modelValue":m[0]||(m[0]=s=>u(e).width=s)},null,8,["modelValue"]),D(g,{modelValue:u(e).height,"onUpdate:modelValue":m[1]||(m[1]=s=>u(e).height=s)},null,8,["modelValue"])]),_("div",ne,[_("aside",se,[D(Y)]),_("div",ie,[D(W)]),le])])}}});G=x(re,[["__scopeId","data-v-c80949b7"]])});export{xe as __tla,G as default};
