import{u as w,a as b,__tla as x}from"./useViewData.7dcd9971.js";import{d as y,aN as k,be as g,r as v,ca as $,V as P,o as r,c as l,a4 as q,aU as B,B as L,L as V,w as z,i as E,O as I,P as N,N as S,_ as C,__tla as H}from"./index.e2cdef89.js";import{a as O,__tla as R}from"./api.60b3e58b.js";import{__tla as U}from"./request.7f5540be.js";let m,j=Promise.all([(()=>{try{return x}catch{}})(),(()=>{try{return H}catch{}})(),(()=>{try{return R}catch{}})(),(()=>{try{return U}catch{}})()]).then(async()=>{const d=y({__name:"ViewPreview",setup(A){const _=w(),{viewData:p}=k(_),c=g(),t=v(p.value),i=v(!0),u=()=>{let s=t.value.componentData.map(e=>b(e));Promise.all(s).then(e=>{e.forEach(({id:a,data:o})=>{h(a,o)})})},h=(s,e)=>{let a=t.value.componentData.findIndex(o=>o.id==s);if(a!=-1){let o=t.value.componentData[a];const{type:n}=o;switch(n){case"text":t.value.componentData[a].props.value=e;break;case"img":t.value.componentData[a].props.src=e;break;case"iframe":t.value.componentData[a].props.url=e;break;case"chartPie":t.value.componentData[a].props.option.dataset.source=e;break;case"chartBar":t.value.componentData[a].props.option.dataset.source=e;break;case"chartLine":t.value.componentData[a].props.option.dataset.source=e;break;case"icon":t.value.componentData[a].props.icon=e;break;default:t.value.componentData[a].props.value=e;break}}};c.query.id?O.getDetail({id:c.query.id}).then(s=>{const{code:e,data:a,msg:o}=s;i.value=!1,e==0&&(t.value=a,u())}):(t.value=p.value,u());const f=s=>{const{positionSize:{left:e,top:a,width:o,height:n}}=s;return{position:"absolute",left:`${e}px`,top:`${a}px`,width:`${o}px`,height:`${n}px`}},D=()=>({width:`${t.value.width}px`,height:`${t.value.height}px`});return(s,e)=>{const a=$("loading");return P((r(),l("div",{class:"view-preview",style:D},[(r(!0),l(q,null,B(t.value.componentData,o=>(r(),l("div",{key:o.id,style:L(f(o)),class:"box"},[(r(),V(S(o.name),N(o.props,{preview:!0}),{default:z(()=>[E(I(o.name=="el-text"?o.props.value:""),1)]),_:2},1040))],4))),128))])),[[a,i.value]])}}});m=C(d,[["__scopeId","data-v-a5e3ad5f"]])});export{j as __tla,m as default};
